<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>测试用例</title>
<script type="text/javascript"
	th:src="@{/js/import/jquery-3.4.1.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/import/popper-1.14.7.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/import/bootstrap/bootstrap-3.3.2.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/import/bootstrap/bootstrap-multiselect-0.9.15.js}"></script>
<script type="text/javascript" th:src="@{/js/util.js}"></script>
<script type="text/javascript" th:src="@{/js/testcase.js}"></script>
<script type="text/javascript"
	th:src="@{/js/import/bootstrap/bootstrap-treeview.min.js}"></script>
<script type="text/javascript"
	th:src="@{/js/import/cytoscape.js-3.13.1/cytoscape.min.js}"></script>
<link rel="stylesheet"
	th:href="@{/css/import/bootstrap/bootstrap-3.3.2.min.css}"></link>
<link rel="stylesheet"
	th:href="@{/css/import/bootstrap/bootstrap-multiselect-0.9.15.css}"></link>
<link rel="stylesheet"
	th:href="@{/css/import/bootstrap/bootstrap-treeview.min.css}"></link>
</head>
<body>
	<div th:include="nav.html::nav"></div>
	<div class="col-sm-12" style="margin-bottom: 15px;">
		<div>
			<form role="form">
				<div class="form-group">
					<select id="testcaseList" multiple="multiple">
						<optgroup th:each="group, testCasesList : ${testCases}"
							th:label="${group.key}">
							<option th:each="testCase : ${group.value}"
								th:text="${testCase.testCaseName}" th:value="${testCase.id}"></option>
						</optgroup>
					</select>
					<button id="submit" type="button" class="btn btn-default">提交</button>
				</div>
			</form>
		</div>
		<div>
			<h3>特性覆盖</h3>
			<table class="table table-bordered">
				<tr>
					<th></th>
					<th th:each="feature : ${features}" th:text="${feature.featureName}"/>
				</tr>
				<tr>
					<td>合计</td>
					<td th:each="feature : ${executeFeatures}">
						<span th:unless="${feature eq null}">Y</span>
					</td>
				</tr>
				<tr th:each="testCase, features : ${testCaseToFeatures}">
					<td th:text="${testCase.key.testCaseName}" />
					<td th:each="feature : ${testCase.value}">
						<span th:unless="${feature eq null}">Y</span>
					</td>
				</tr>
			</table>
			<h3>方法覆盖</h3>
			<table class="table table-bordered">
				<tr>
					<th></th>
					<th>合计</th>
					<th th:each="project : ${projects}" th:text="${project.projectName + '(' + project.language + ')'}"/>
				</tr>
				<tr>
					<td>合计</td>
					<td th:each="projectCoverage : ${mergeCoverages}" th:text="${projectCoverage}">
					</td>
				</tr>
				<tr th:each="testCase, coverageList : ${testCaseToCoverages}">
					<td th:text="${testCase.key.testCaseName}" />
					<td th:each="coverageList : ${testCase.value}" th:text="${coverageList}">
					</td>
				</tr>
			</table>
		</div>

	</div>
	<script type="text/javascript" th:inline="javascript">
		//<![CDATA[
		$(document).ready(function() {
			$("#testcaseList").multiselect({
				enableClickableOptGroups: true,
				enableCollapsibleOptGroups: true,
	            enableFiltering: true,
				collapseOptGroupsByDefault: true,
	            enableCollapsibleOptGroups: true
			});
			var testcases = [[${testCases}]];
			var projects = [[${projects}]];
			var features = [[${features}]];
			var testCaseToFeatures = [[${testCaseToFeatures}]];
			var executeFeatures = [[${executeFeatures}]]
			console.log(executeFeatures);
			console.log(features);
			console.log(projects);
			$("#submit").click(function(){
				console.log($("#testcaseList").val());
			});
		});
		// ]]>
	</script>
</body>
</html>